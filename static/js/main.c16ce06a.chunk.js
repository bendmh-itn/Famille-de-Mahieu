(this.webpackJsonpfamille=this.webpackJsonpfamille||[]).push([[0],{35:function(e,t,n){},64:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),i=n.n(c),r=n(21),s=n.n(r),o=(n(64),n(3)),l=n(7),d=n(10),m=(n(35),n(11)),u=n.n(m),j=n(22),b=n(12),h=(n(66),n(97),n(96),{}),f=function(){return h},O=new b.a.auth.GoogleAuthProvider,x=(b.a.apps.length?b.a.app():b.a.initializeApp({apiKey:"AIzaSyB3JOdtAfXGRs5ob9KztShnK3OCY-m4oiU",authDomain:"demahieu-file.firebaseapp.com",projectId:"demahieu-file",storageBucket:"demahieu-file.appspot.com",messagingSenderId:"192092843689",appId:"1:192092843689:web:d490269a5a93671c3483b8"})).firestore();function p(){return(p=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("famille").doc(n).update({PhotosHistory:b.a.firestore.FieldValue.arrayRemove(t)}).then((function(){b.a.storage().refFromURL(t).delete()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.storage().refFromURL(t).delete();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return N.apply(this,arguments)}function N(){return(N=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("evenement").doc(t).update({Photos:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return x.collection("famille").add({deathDate:e[9],firstName:e[7],lastName:e[4],generation:e[8],birthDate:e[5],numberFamilly:e[3],pictureName:e[2],PhotosHistory:b.a.firestore.FieldValue.arrayUnion(e[6]),famillyName:e[1],dateMariage:e[10],email:e[11],status:"\xe0 v\xe9rifi\xe9"})}function w(){return(w=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,x.collection("emails").where("status","==","\xe0 v\xe9rifi\xe9").get().then((function(e){return e.forEach((function(e){t.push({value:e.data().adresseMail+"email:"+e.id,label:e.data().adresseMail})})),t})).catch((function(e){console.log("Error getting documents: ",e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.collection("emails").doc(t).delete().catch((function(e){console.error("Error removing document: ",e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.collection("famille").where("numberFamilly","==",t.split("/")[1]).get().then((function(e){e.forEach((function(e){x.collection("famille").doc(e.id).update({email:n})}))})).catch((function(e){console.log("Error getting documents: ",e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,x.collection("emails").where("adresseMail","==",t).get().then((function(e){return e.forEach((function(e){n.push(e.data())})),n})).catch((function(e){console.log("Error getting documents: ",e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n,a){return x.collection("evenement").doc(e).update({Photos:"images"===a?b.a.firestore.FieldValue.arrayUnion({image:t,Added_by:n}):"video"===a?b.a.firestore.FieldValue.arrayUnion({video:t,Added_by:n}):b.a.firestore.FieldValue.arrayUnion({link:t.link,texte:t.title,Added_by:n})})}function D(){return x.collection("evenement").orderBy("Date","desc").get()}function E(e,t,n){return x.collection("evenement").doc(t).update({Titre:e.titre,PhotoEvent:n,Date:b.a.firestore.Timestamp.fromDate(new Date(e.date))})}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return x.collection("famille").add({firstName:e.firstName,lastName:e.lastName,generation:e.generation,birthDate:e.birthDate,numberFamilly:e.numberFamilly,pictureName:t,PhotosHistory:b.a.firestore.FieldValue.arrayUnion(t),famillyName:e.famillyName,dateMariage:e.dateMariage,email:""})}var P=b.a.storage(),I=b.a.auth(),L=(b.a.firestore(),function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,x.collection("famille").where("email","==",t).get().then((function(e){return e.forEach((function(e){var t,a;n.id=e.id,n.data=e.data(),t=e.id,a=e.data(),(h={}).id=t,h.data=a})),n})).catch((function(e){console.log("Error getting documents: ",e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function A(e){x.collection("evenement").doc(e).delete().then((function(){window.location.reload(!1)})).catch((function(e){console.log(e)}))}var V={findAll:function(){return x.collection("famille").orderBy("numberFamilly","asc").get()},signInWithGoogle:function(){I.signInWithPopup(O).then((function(e){var t=e.user.email;x.collection("emails").where("adresseMail","==",t).get().then((function(e){localStorage.setItem("email",t),e.empty?x.collection("emails").add({adresseMail:t,status:"\xe0 v\xe9rifi\xe9"}).then((function(){window.location.reload()})):window.location.reload()})).catch((function(e){console.log("Error getting documents: ",e)}))}))},FindIdPerson:function(e){return x.collection("famille").where("numberFamilly","==",e).get()},ModifyUserFireBase:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return void 0===t.dateMariage&&(t.dateMariage=""),x.collection("famille").doc(e).update({firstName:t.firstName,lastName:t.lastName,generation:t.generation,birthDate:t.birthDate,numberFamilly:t.numberFamilly,pictureName:""===n?t.pictureName:n,PhotosHistory:""===n?b.a.firestore.FieldValue.arrayUnion(t.pictureName):b.a.firestore.FieldValue.arrayUnion(n),famillyName:t.famillyName,dateMariage:t.dateMariage,email:t.email})},FindEmailPerson:function(e){return x.collection("famille").where("email","==",e).get()},Disconnect:function(){I.signOut().then((function(){localStorage.setItem("email",""),window.location.reload()})).catch((function(e){console.log(e)}))}},B=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("nav",{id:"MyModification",className:"navbar navbar-expand-lg navbar-dark",children:[Object(a.jsx)(l.b,{className:"navbar-brand",to:"/",children:"Famille de Mahieu"}),Object(a.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(a.jsx)("span",{className:"navbar-toggler-icon"})}),Object(a.jsxs)("div",{className:"collapse navbar-collapse justify-content-between",id:"navbarSupportedContent",children:[Object(a.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(l.b,{className:"navbar-brand",to:"/anniversaire",children:"Anniversaires"})}),Object(a.jsxs)("li",{className:"nav-item dropdown",children:[Object(a.jsx)(l.b,{className:"navbar-brand dropdown-toggle",to:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"G\xe9n\xe9ration"}),Object(a.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:[Object(a.jsx)(l.b,{className:"dropdown-item",to:"/generation2",children:"G\xe9n\xe9ration 2"}),Object(a.jsx)(l.b,{className:"dropdown-item",to:"/generation3",children:"G\xe9n\xe9ration 3"}),Object(a.jsx)(l.b,{className:"dropdown-item",to:"/generation4",children:"G\xe9n\xe9ration 4"})]})]}),Object(a.jsxs)("li",{className:"nav-item dropdown",children:[Object(a.jsx)(l.b,{className:"navbar-brand dropdown-toggle",to:"#",id:"navbarDropdownJeux",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Jeux"}),Object(a.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:[Object(a.jsx)(l.b,{className:"dropdown-item",to:"/jeu2",children:"Jeu 1"}),Object(a.jsx)(l.b,{className:"dropdown-item",to:"/jeu",children:"Jeu 2"})]})]}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(l.b,{className:"navbar-brand",to:"/arbre",children:"Arbre"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(l.b,{className:"navbar-brand",to:"/profil",children:"Profil"})})]}),(null===localStorage.getItem("email")||""===localStorage.getItem("email"))&&Object(a.jsx)("button",{className:"buttonConnexion navbar-brand text-right",onClick:function(){V.signInWithGoogle()},children:"Connexion"}),null!==localStorage.getItem("email")&&""!==localStorage.getItem("email")&&Object(a.jsx)("button",{className:"buttonConnexion navbar-brand text-right",onClick:function(){V.Disconnect()},children:"D\xe9connexion"})]})]})})},U=n(25),R=n(26),T=n(28),_=n(57),z=Object(c.createContext)({user:null}),G=function(e){Object(T.a)(n,e);var t=Object(_.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={user:null},e.componentDidMount=function(){I.onAuthStateChanged((function(t){e.setState({user:t})}))},e}return Object(R.a)(n,[{key:"render",value:function(){return Object(a.jsx)(z.Provider,{value:this.state.user,children:this.props.children})}}]),n}(c.Component),q=function(e){var t=e.person,n=e.link,c=void 0===n?"#":n,i=e.myBirthday,r=void 0!==i&&i,s=e.className,o=void 0===s?"elementFlexible":s,l=Object(d.f)();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:o,children:["#"!==c&&Object(a.jsx)("button",{className:"myButton",onClick:function(){return l.push(c)},children:Object(a.jsx)("img",{src:t.pictureName,alt:t.firstName+" "+t.lastName})}),"#"===c&&Object(a.jsx)("img",{className:"picture",src:t.pictureName,alt:t.firstName+" "+t.lastName}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h5",{children:t.firstName+" "+t.lastName}),Object(a.jsxs)("h6",{children:[t.birthDate,t.deathDate&&Object(a.jsxs)("span",{children:[" - ",t.deathDate]})]})]}),r&&Object(a.jsx)("h2",{className:"clignote",children:"Happy birthday"})]})})},H="4",Y=[],J=function(){return Y},W=function(e){Y=[],e.forEach((function(e){Y.push(e)}))},K=function(e,t){var n=[],a=e.toString().slice(0,t-1);return Y.filter((function(e){return e.numberFamilly.toString().slice(0,t-1)===a&&e.numberFamilly<10*a+10})).map((function(e){return n.push(e)})),n},Q=function(){var e=[];return Y.filter((function(e){return e.generation!==H})).map((function(t){return e.push({value:t.generation+"/"+t.numberFamilly,label:t.firstName+" "+t.lastName})})),e},X=function(e){var t=[];return Y.filter((function(t){return t.numberFamilly===e})).map((function(e){return t.push(e)})),t[0]},Z=function(){var e=[];return Y.filter((function(e){return"1"!==e.generation&&e.generation!==H&&void 0===e.email||""===e.email})).map((function(t){return e.push({value:t.generation+"/"+t.numberFamilly,label:t.firstName+" "+t.lastName})})),e};function $(e,t){var n=e.birthDate.split("/")[2],a=t.birthDate.split("/")[2],c=e.birthDate.split("/")[1],i=t.birthDate.split("/")[1],r=e.birthDate.split("/")[0],s=t.birthDate.split("/")[0];return n!==a?n>a?1:-1:c!==i?c>i?1:-1:r!==s?r>s?1:-1:0}function ee(e,t){return e.birthDate!==t.birthDate?e.birthDate>t.birthDate?1:-1:0}var te=function(){var e=[],t=new Date,n=t.getMonth()+1<10?"0"+(t.getMonth()+1).toString():(t.getMonth()+1).toString();return Y.forEach((function(t){t.birthDate.split("/")[1]===n&&e.push(t)})),e.sort(ee),e},ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];if(t){var a=ae(Y);a.forEach((function(t){t.generation===e&&n.push(t)}))}else Y.forEach((function(t){t.generation===e&&n.push(t)}));return n.sort($),n},ae=function(){return Y.filter((function(e){return"https://firebasestorage.googleapis.com/v0/b/demahieu-file.appspot.com/o/images%2Fnaruto-g5ac97839f_640.png?alt=media&token=89f220af-2915-4dcc-9fd7-6e69de09fe7c"!==e.pictureName&&"https://firebasestorage.googleapis.com/v0/b/demahieu-file.appspot.com/o/images%2Fhomme.PNG?alt=media&token=e9014335-a2b9-48a8-9732-f9997269b515"!==e.pictureName&&"https://firebasestorage.googleapis.com/v0/b/demahieu-file.appspot.com/o/images%2Ffemme.PNG?alt=media&token=1e2723b0-31a3-44de-a503-d2d7c0694e88"!==e.pictureName}))},ce=function(){return ie(ae(Y))};function ie(e){var t,n,a;for(t=e.length-1;t>0;t--)n=Math.floor(Math.random()*(t+1)),a=e[t],e[t]=e[n],e[n]=a;return e}function re(e){for(var t=[],n={},a=function(){var a=Math.floor(2*Math.random()),c=void 0;c=0===a?e.slice(0,2):e.slice(0,2)+"0",Y.filter((function(e){return e.numberFamilly===c})).forEach((function(e){t.push(e),n.goodAnswer=e}))};0===t.length;)a();for(var c=ie(ae(Y).filter((function(t){return"3"===t.generation&&t.numberFamilly!==e.slice(0,2)&&t.numberFamilly!==e.slice(0,2)+"0"}))),i=0;i<3;i++)t.push(c[i]);var r=ie(t);return n.tabParentsRandom=r,n}var se=n(39),oe=function(e){var t=e.data,n=Object(d.f)();return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(se.a,{id:"searchFamilly",options:t,isClearable:!0,isSearchable:!0,onChange:function(e){null!==e&&n.push("/arbre/"+e.value)}})})},le=function(e){var t=e.match,n=Object(c.useState)([]),i=Object(o.a)(n,2),r=i[0],s=i[1],l=Object(c.useState)(""),d=Object(o.a)(l,2),m=d[0],u=d[1],j=Object(c.useState)([]),b=Object(o.a)(j,2),h=b[0],f=b[1];return Object(c.useEffect)((function(){var e=t.params.numberFamilly,n=t.params.generation;if(u(t.params.generation),void 0!==n&&void 0!==e||(e=0,n="1",u("1")),0===J().length)V.findAll().then((function(t){var a=t.docs.map((function(e){return e.data()}));W(a);var c=K(e,n);s([]),s(c),f(Q()),window.scroll(0,0)}));else{var a=K(e,n);f(Q()),s([]),s(a),window.scroll(0,0)}}),[t.params.generation,t.params.numberFamilly]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(oe,{data:h}),void 0!==r[0]&&Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{className:"mb-0",children:r[0].famillyName}),void 0!==r[0].dateMariage&&Object(a.jsx)("h4",{className:"text-center mb-4",children:r[0].dateMariage}),void 0===r[0].dateMariage&&Object(a.jsx)("br",{})]}),Object(a.jsx)("div",{className:"containerFlexible",children:r.filter((function(e){return e.generation===m})).map((function(e){return Object(a.jsx)(q,{person:e,link:"#"},e.firstName+""+e.famillyName)}))}),Object(a.jsx)("div",{className:"containerFlexible",children:r.filter((function(e){return e.generation!==m})).map((function(e){return Object(a.jsx)(q,{person:e,link:e.generation===H||"1"===e.generation?"#":"/arbre/"+e.generation+"/"+e.numberFamilly},e.firstName+""+e.famillyName)}))})]})},de=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),l=s[0],d=s[1],m=Object(c.useState)(""),u=Object(o.a)(m,2),j=u[0],b=u[1];return Object(c.useEffect)((function(){var e,t=new Date;d(["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","aout","septembre","octobre","novembre","d\xe9cembre"][t.getMonth()]),b(t.getDate()),0===J().length?V.findAll().then((function(t){var n=t.docs.map((function(e){return e.data()}));W(n),e=te(),i(e)})):(e=te(),i(e))}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("h2",{className:"text-center mb-3",children:[n.length," anniversaire(s) en ",l]})}),Object(a.jsx)("div",{className:"containerFlexible",children:void 0!==n&&n.map((function(e){return Object(a.jsx)(q,{person:e,link:e.generation===H||"1"===e.generation?"#":"/arbre/"+e.generation+"/"+e.numberFamilly,myBirthday:e.birthDate.split("/")[0]===(j.toString()<10?"0"+j.toString():j.toString())},e.firstName+""+e.famillyName)}))})]})},me=function(){var e=Object(c.useState)("generation2"),t=Object(o.a)(e,2),n=t[0],i=t[1],r=function(e){i(e)},s=Object(d.g)();return Object(c.useEffect)((function(){i(s.pathname.substring(1))}),[s]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark space-around",children:[Object(a.jsxs)(l.b,{onClick:function(){return r("generation2")},className:"navbar-brand",to:"/generation2",children:["generation2"===n&&Object(a.jsx)("ion-icon",{name:"reorder-two-sharp"}),"generation2"!==n&&Object(a.jsx)("ion-icon",{name:"reorder-two-outline"})]}),Object(a.jsxs)(l.b,{onClick:function(){return r("generation3")},className:"navbar-brand",to:"/generation3",children:["generation3"===n&&Object(a.jsx)("ion-icon",{name:"reorder-three-sharp"}),"generation3"!==n&&Object(a.jsx)("ion-icon",{name:"reorder-three-outline"})]}),Object(a.jsxs)(l.b,{onClick:function(){return r("generation4")},className:"navbar-brand",to:"/generation4",children:["generation4"===n&&Object(a.jsx)("ion-icon",{name:"reorder-four-sharp"}),"generation4"!==n&&Object(a.jsx)("ion-icon",{name:"reorder-four-outline"})]})]})})},ue=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(c.useEffect)((function(){var e;0===J().length?V.findAll().then((function(t){var n=t.docs.map((function(e){return e.data()}));W(n),e=ne("2"),i(e)})):(e=ne("2"),i(e))}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"d-block d-sm-block d-md-block d-lg-none",children:Object(a.jsx)(me,{})}),Object(a.jsxs)("h1",{className:"text-uppercase text-center",children:["La 2",Object(a.jsx)("sup",{className:"text-lowercase",children:"\xe8me"})," g\xe9n\xe9ration"]}),Object(a.jsxs)("h3",{className:"mb-4",children:["Il y a ",n.length," personnes"]})]}),Object(a.jsx)("div",{className:"containerFlexible",children:n.map((function(e){return Object(a.jsx)(q,{person:e,link:"/arbre/"+e.generation+"/"+e.numberFamilly},e.firstName+""+e.famillyName)}))})]})},je=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(c.useEffect)((function(){var e;0===J().length?V.findAll().then((function(t){var n=t.docs.map((function(e){return e.data()}));W(n),e=ne("3"),i(e)})):(e=ne("3"),i(e))}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"d-block d-sm-block d-md-block d-lg-none",children:Object(a.jsx)(me,{})}),Object(a.jsxs)("h1",{className:"text-uppercase text-center",children:["La 3",Object(a.jsx)("sup",{className:"text-lowercase",children:"\xe8me"})," g\xe9n\xe9ration"]}),Object(a.jsxs)("h3",{className:"mb-4",children:["Il y a ",n.length," personnes"]})]}),Object(a.jsx)("div",{className:"containerFlexible",children:n.map((function(e){return Object(a.jsx)(q,{person:e,link:"/arbre/"+e.generation+"/"+e.numberFamilly},e.firstName+""+e.famillyName)}))})]})},be=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(c.useEffect)((function(){var e;0===J().length?V.findAll().then((function(t){var n=t.docs.map((function(e){return e.data()}));W(n),e=ne("4"),i(e)})):(e=ne("4"),i(e))}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"d-block d-sm-block d-md-block d-lg-none",children:Object(a.jsx)(me,{})}),Object(a.jsxs)("h1",{className:"text-uppercase text-center",children:["La 4",Object(a.jsx)("sup",{className:"text-lowercase",children:"\xe8me"})," g\xe9n\xe9ration"]}),Object(a.jsxs)("h3",{className:"mb-4",children:["Il y a ",n.length," personnes"]})]}),Object(a.jsx)("div",{className:"containerFlexible",children:n.map((function(e){return Object(a.jsx)(q,{person:e,dateDeces:e.deathDate,link:"/arbre/3/"+Math.round(e.numberFamilly/10)},e.firstName+""+e.famillyName)}))})]})},he=function(){var e=Object(c.useState)("jeu2"),t=Object(o.a)(e,2),n=t[0],i=t[1],r=function(e){i(e)},s=Object(d.g)();return Object(c.useEffect)((function(){i(s.pathname.substring(1))}),[s]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark space-around",children:[Object(a.jsxs)(l.b,{onClick:function(){return r("generation2")},className:"navbar-brand",to:"/jeu2",children:["jeu2"===n&&Object(a.jsx)("ion-icon",{name:"rocket"}),"jeu2"!==n&&Object(a.jsx)("ion-icon",{name:"rocket-outline"})]}),Object(a.jsxs)(l.b,{onClick:function(){return r("generation3")},className:"navbar-brand",to:"/jeu",children:["jeu"===n&&Object(a.jsx)("ion-icon",{name:"baseball"}),"jeu"!==n&&Object(a.jsx)("ion-icon",{name:"baseball-outline"})]})]})})},fe=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)([]),l=Object(o.a)(s,2),d=l[0],m=l[1],u=Object(c.useState)(0),j=Object(o.a)(u,2),b=j[0],h=j[1],f=Object(c.useState)(0),O=Object(o.a)(f,2),x=O[0],p=O[1],g=Object(c.useState)(""),v=Object(o.a)(g,2),N=v[0],y=v[1],w=Object(c.useState)(!1),C=Object(o.a)(w,2),F=C[0],k=C[1],S=Object(c.useState)(0),D=Object(o.a)(S,2),E=D[0],M=D[1],P=Object(c.useState)(""),I=Object(o.a)(P,2),L=I[0],A=I[1],B=Object(c.useState)(0),U=Object(o.a)(B,2),R=U[0],T=U[1],_=Object(c.useState)(i.a.createRef()),z=Object(o.a)(_,1)[0],G=Object(c.useState)("imageVerticale"),q=Object(o.a)(G,2),H=q[0],Y=q[1],K=Object(c.useRef)(null);function Q(){N.toLowerCase().replace(/\s+/g,"")===d.firstName.toLowerCase().replace(/\s+/g,"")?(h(F?b+.5:b+1),A("")):A(d.firstName),function(){var e=E;M(E+1),m(n[e+=1])}(),k(!1),x!==n.length&&p(x+1),y(""),K.current.focus()}Object(c.useEffect)((function(){if(0===J().length)V.findAll().then((function(e){var t=e.docs.map((function(e){return e.data()}));W(t);var n=ce(),a=[];1===R?(n.forEach((function(e){"4"===e.generation&&a.push(e)})),p(0),h(0),r(a),m(a[0])):(p(0),h(0),r(n),m(n[0]))}));else{var e=ce(),t=[];1===R?(e.forEach((function(e){"4"===e.generation&&t.push(e)})),p(0),h(0),r(t),m(t[0])):(p(0),h(0),r(e),m(e[0]))}K.current.focus()}),[R]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"d-block d-sm-block d-md-block d-lg-none",children:Object(a.jsx)(he,{})}),!d&&Object(a.jsx)("h2",{children:"Les donn\xe9es arrivent. Soyez patient"}),d&&20!==x&&Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)("h2",{className:"text-center mt-3",children:"Quel est mon pr\xe9nom ?"}),Object(a.jsx)("div",{className:H,children:Object(a.jsx)("img",{ref:z,src:d.pictureName,alt:d.firstName,onLoad:function(){z.current.naturalHeight>z.current.naturalWidth?Y("imageVerticale"):Y("containerFlexible imageHorizontale")}})}),F&&Object(a.jsx)("h2",{children:d.lastName}),Object(a.jsx)("div",{className:"form-group mt-4",children:Object(a.jsx)("input",{type:"text",ref:K,value:N,onKeyPress:function(e){"Enter"===e.key&&Q()},onChange:function(e){return y(e.target.value)}})}),Object(a.jsxs)("div",{className:"containerFlexible",children:[Object(a.jsx)("div",{className:"elementFlexible",children:Object(a.jsx)("button",{onClick:Q,className:"btn btn-primary mt-3",children:"V\xe9rifier"})}),Object(a.jsx)("div",{className:"elementFlexible",children:Object(a.jsx)("button",{onClick:function(){k(!0)},className:"btn btn-secondary mt-3",children:"indice"})}),Object(a.jsx)("div",{className:"elementFlexible",children:Object(a.jsx)("button",{onClick:function(e){T(0===R?1:0)},className:"btn btn-danger mt-3",children:0===R?"Difficile":"Facile"})})]}),Object(a.jsxs)("h3",{className:"mt-3",children:["Votre score : ",b," sur ",x]}),L&&Object(a.jsxs)("p",{children:["Son pr\xe9nom \xe9tait ",L]})]}),20===x&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("h1",{children:["Bravo tu as obtenu ",b," sur ",x]}),Object(a.jsx)("button",{onClick:function(){!function(){var e=ce(),t=[];1===R?(e.forEach((function(e){"4"===e.generation&&t.push(e)})),p(0),h(0),r(t),m(t[0])):(p(0),h(0),r(e),m(e[0]))}(),A(""),M(0)},className:"btn btn-primary mt-3",children:"Recommencer"})]})]})})},Oe=n(8),xe=n(5),pe=function(e){var t=e.data,n=e.modifyPerson,c=e.isClearable,i=void 0===c||c;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(se.a,{id:"searchFamilly",options:t,isClearable:i,isSearchable:!0,onChange:function(e){n(null!==e?e.value:null)}})})},ge=n(23),ve=n.n(ge),Ne=n(100),ye=function(e){var t=e.person,n=e.id,i=Object(c.useState)(0),r=Object(o.a)(i,2),s=r[0],l=r[1],d=function(e){window.confirm("Cette photo sera supprim\xe9 d\xe9finitivement. \xcates-vous s\xfbr de vouloir la supprimer ?")&&function(e,t){return p.apply(this,arguments)}(e,n).then((function(){window.location.reload(!1)}))},m=function(e){(function(e,t){return x.collection("famille").doc(e).update({pictureName:t})})(n,e).then((function(){window.location.reload(!1)}))};return Object(a.jsx)(Ne.a,{activeIndex:s,onSelect:function(e,t){l(e)},indicators:!1,children:t.PhotosHistory&&t.PhotosHistory.map((function(e){return Object(a.jsxs)(Ne.a.Item,{children:[Object(a.jsxs)("div",{className:"float",children:[t.pictureName!==e&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("ion-icon",{class:"myIcon",size:"large",name:"trash-outline",onClick:function(){return d(e)}}),Object(a.jsx)("ion-icon",{class:"myIcon",size:"large",name:"star-outline",onClick:function(){return m(e)}})]}),t.pictureName===e&&Object(a.jsx)("ion-icon",{class:"myIcon",size:"large",name:"star-sharp",onClick:function(){return m(e)}})]}),Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)("img",{className:"d-block",src:e,alt:"Slide n\xb0 "+s})})]},e)}))})},we=n(99),Ce=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(we.a,{animation:"border",role:"status"}),Object(a.jsx)("span",{children:"Loading data"})]})},Fe=function(e){var t=e.personSelect,n=1*t.generation+1,i=K(t.numberFamilly,t.generation).filter((function(e){return e.generation===""+n})).length,r=10*t.numberFamilly+i+1,s=Object(c.useState)({famillyName:t.famillyName,lastName:"",firstName:"",birthDate:"",numberFamilly:""+r,generation:""+n,dateMariage:""}),l=Object(o.a)(s,2),d=l[0],m=l[1],u=function(e){var t=e.target,n=t.name,a=t.value;m(Object(xe.a)(Object(xe.a)({},d),{},Object(Oe.a)({},n,a)))};return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"modal fade",id:"addPeople",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(a.jsx)("div",{className:"modal-dialog",role:"document",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Ajouter une personne dans ma famille"}),Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(a.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Nom"}),Object(a.jsx)("input",{className:"form-control",name:"lastName",placeholder:"Nom...",onChange:u})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Pr\xe9nom"}),Object(a.jsx)("input",{className:"form-control",name:"firstName",placeholder:"Pr\xe9nom...",onChange:u})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Date de naissance (avec / entre les nombres)"}),Object(a.jsx)("input",{className:"form-control",name:"birthDate",placeholder:"Date de naissance...",onChange:u})]}),Object(a.jsxs)("div",{className:"form-check form-switch",children:[Object(a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault",onChange:function(e){var n=10*t.numberFamilly,a=K(t.numberFamilly,t.generation).filter((function(e){return e.generation===e.generation+1})).length,c=10*t.numberFamilly+a+1,i=parseInt(d.numberFamilly)===c?n:c,r=parseInt(d.generation)===1*t.generation+1?t.generation:1*t.generation+1;m(Object(xe.a)(Object(xe.a)({},d),{},{numberFamilly:""+i,generation:""+r}))}}),Object(a.jsx)("label",{className:"form-check-label",htmlFor:"flexSwitchCheckDefault",children:"Change si tu ajoutes un(e) conjoint(e)"})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("label",{children:"L'image s'ajoute juste apr\xe8s la cr\xe9ation"})})]}),Object(a.jsxs)("div",{className:"modal-footer",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),Object(a.jsx)("button",{type:"button",className:"btn btn-success","data-dismiss":"modal",onClick:function(){return M(d).then((function(){window.location.reload(!1)}))},children:"Ajouter"})]})]})})})})},ke=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)([]),s=Object(o.a)(r,2),d=s[0],m=s[1],u=Object(c.useState)(""),j=Object(o.a)(u,2),b=j[0],h=j[1],f=Object(c.useState)(""),O=Object(o.a)(f,2),x=O[0],p=O[1],g=Object(c.useState)(""),v=Object(o.a)(g,2),N=v[0],y=v[1],w=Object(c.useState)(!0),C=Object(o.a)(w,2),F=C[0],k=C[1],S=Object(c.useState)(!1),D=Object(o.a)(S,2),E=D[0],M=D[1],I=Object(c.useState)("backCard"),L=Object(o.a)(I,2),A=L[0],B=L[1],U=Object(c.useState)(""),R=Object(o.a)(U,2),T=R[0],_=R[1],G=Object(c.useState)([]),q=Object(o.a)(G,2),K=q[0],Q=q[1],$=Object(c.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ae=Object(c.useContext)(z),ce=function(e){if(window.scroll(0,0),null!==e){var t=e.split("/")[1],n=X(t);void 0===n.email&&(n.email=""),Q(n),V.FindIdPerson(t).then((function(e){var t=e.docs.map((function(e){return e.id}));p(t[0])}))}B("backCard")},ie=function(e){var t=e.target,n=t.name,a=t.value;Q(Object(xe.a)(Object(xe.a)({},K),{},Object(Oe.a)({},n,a)))};return Object(c.useEffect)((function(){var e=function(){var e;null!==ae&&(e=ae.email,i(ae.email),V.FindEmailPerson(e).then((function(t){var n=t.docs.map((function(e){return e.id}));if(void 0!==n[0]){p(n[0]),k(!0);var a=function(e){var t=[];return Y.filter((function(t){return t.email===e})).map((function(e){return t.push(e)})),t[0]}(e);void 0!==a&&(Q(a),m(function(e,t){var n=[],a=e.toString().slice(0,t-1);return"3"===t?Y.filter((function(e){return e.numberFamilly.toString().slice(0,t-1)===a&&e.numberFamilly<10*a+10})).map((function(e){return n.push({value:e.generation+"/"+e.numberFamilly,label:e.firstName+" "+e.lastName})})):Y.filter((function(e){return e.numberFamilly.toString().slice(0,t-1)===a&&e.numberFamilly<=10*a})).map((function(e){return n.push({value:e.generation+"/"+e.numberFamilly,label:e.firstName+" "+e.lastName})})),n}(a.numberFamilly,a.generation))),_(ae)}else m(Z()),k(!1),_(ae)})))};0===J().length?V.findAll().then((function(t){var n=t.docs.map((function(e){return e.data()}));W(n),e()})):e()}),[ae]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"container mt-4",children:[""===T&&Object(a.jsx)("div",{children:Object(a.jsx)("h2",{children:"Les donn\xe9es arrivent. Soyez patient"})}),""!==T&&!F&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:["Votre adresse mail : ",Object(a.jsx)("span",{className:"email",children:n})]}),Object(a.jsx)("p",{children:"Ce sera votre adresse pour modifier vos donn\xe9es"}),Object(a.jsx)("p",{children:"Trouve ton nom dans la liste pour ajouter ton adresse mail \xe0 ton compte"}),Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"Ne te trompe surtout pas"}),Object(a.jsx)(pe,{data:d,modifyPerson:ce}),Object(a.jsx)("button",{className:"btn btn-success mt-4 mb-4",onClick:function(){K.email=n,V.ModifyUserFireBase(x,K).then((function(){h("Votre adresse a bien \xe9t\xe9 ajout\xe9e."),window.location.reload()})).catch((function(e){h("Error writing document: "+e)}))},children:"Valider"}),Object(a.jsx)("div",{className:"alert alert-success "+A,role:"alert",children:Object(a.jsx)("p",{children:b})})]}),""!==T&&F&&Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Votre profil"}),"admin"===K.status&&Object(a.jsx)(l.b,{className:"navbar-brand",to:"/admin/users",children:Object(a.jsx)("button",{className:"btn btn-info text-white",children:"Admin"})}),K.generation!==H&&Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Date de mariage"}),Object(a.jsx)("input",{className:"form-control",name:"dateMariage",value:K.dateMariage||"",placeholder:"Date de mariage",onChange:ie})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Nom"}),Object(a.jsx)("input",{className:"form-control",name:"lastName",value:K.lastName||"",placeholder:"Nom...",onChange:ie})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Pr\xe9nom"}),Object(a.jsx)("input",{className:"form-control",name:"firstName",value:K.firstName||"",placeholder:"Pr\xe9nom...",onChange:ie})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Date de naissance"}),Object(a.jsx)("input",{className:"form-control",name:"birthDate",value:K.birthDate||"",placeholder:"Date de naissance...",onChange:ie})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{className:"form-control",name:"email",value:void 0===K.email?"":K.email,placeholder:"Email...",onChange:ie})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Image profil"}),Object(a.jsx)("input",{className:"form-control",name:"pictureName",type:"file",onChange:function(e){var t=e.target.name,n=e.target.files[0];Q(Object(xe.a)(Object(xe.a)({},K),{},Object(Oe.a)({},t,n))),new ve.a(n,{quality:.5,success:function(e){y(e),M(!0)}})}})]}),Object(a.jsxs)("div",{className:"row align-items-center mb-4",children:[!te&&Object(a.jsx)("div",{className:"col-sm mt-4",children:Object(a.jsx)("button",{className:"btn btn-secondary m-4",onClick:function(){(ne(!0),E)?P.ref("images/".concat(N.name)).put(N).on("state_changed",(function(e){}),(function(e){h("Error writing document: "+e)}),(function(){P.ref("images").child(N.name).getDownloadURL().then((function(e){V.ModifyUserFireBase(x,K,e).then((function(){h("Vos donn\xe9es ont bien \xe9t\xe9 modifi\xe9es"),window.location.reload(!1)})).catch((function(e){h("Error writing document: "+e)}))}))})):V.ModifyUserFireBase(x,K).then((function(){h("Vos donn\xe9es ont bien \xe9t\xe9 modifi\xe9es"),window.location.reload(!1)})).catch((function(e){h("Error writing document: "+e)}));B("frontCard")},children:"Modifier"})}),!te&&Object(a.jsx)("div",{className:"col-sm",children:Object(a.jsx)("button",{className:"btn btn-primary m-4","data-toggle":"modal","data-target":"#addPeople",children:"Ajouter une personne"})}),te&&Object(a.jsx)("div",{className:"col-sm mt-4",children:Object(a.jsx)(Ce,{})})]}),Object(a.jsx)(Fe,{personSelect:K}),Object(a.jsx)("div",{className:"alert alert-success "+A,role:"alert",children:Object(a.jsx)("p",{children:b})}),1!==d.length&&Object(a.jsxs)("div",{children:[Object(a.jsx)("h4",{children:"Pour modifier une personne de votre famille, s\xe9lectionne-le dans la liste ci-dessous"}),Object(a.jsx)(pe,{data:d,modifyPerson:ce,isClearable:!1})]}),K.PhotosHistory&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{className:"mt-4 mb-0",children:"Votre historique photo"}),Object(a.jsx)(ye,{person:K,id:x})]})]})]})})},Se=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],i=t[1],r=function(e){i(e)},s=Object(d.g)();return Object(c.useEffect)((function(){i(s.pathname.substring(1))}),[s]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("nav",{id:"MyModification",className:"navbar navbar-expand-lg navbar-dark",children:[Object(a.jsxs)(l.b,{onClick:function(){return r("")},className:"navbar-brand",to:"/",children:[(""===n||n.includes("event"))&&Object(a.jsx)("ion-icon",{name:"home-sharp"}),""!==n&&!n.includes("event")&&Object(a.jsx)("ion-icon",{name:"home-outline"})]}),Object(a.jsxs)(l.b,{onClick:function(){return r("anniversaire")},className:"navbar-brand",to:"/anniversaire",children:["anniversaire"===n&&Object(a.jsx)("ion-icon",{name:"balloon-sharp"}),"anniversaire"!==n&&Object(a.jsx)("ion-icon",{name:"balloon-outline"})]}),Object(a.jsxs)(l.b,{onClick:function(){return r("generation")},className:"navbar-brand",to:"/generation2",children:[n.includes("generation")&&Object(a.jsx)("ion-icon",{name:"list-sharp"}),!n.includes("generation")&&Object(a.jsx)("ion-icon",{name:"list-outline"})]}),Object(a.jsxs)(l.b,{onClick:function(){return r("jeu")},className:"navbar-brand",to:"/jeu2",children:[n.includes("jeu")&&Object(a.jsx)("ion-icon",{name:"game-controller-sharp"}),!n.includes("jeu")&&Object(a.jsx)("ion-icon",{name:"game-controller-outline"})]}),Object(a.jsxs)(l.b,{onClick:function(){return r("arbre")},className:"navbar-brand",to:"/arbre",children:[n.includes("arbre")&&Object(a.jsx)("ion-icon",{name:"git-network"}),!n.includes("arbre")&&Object(a.jsx)("ion-icon",{name:"git-network-outline"})]}),Object(a.jsxs)(l.b,{onClick:function(){return r("profil")},className:"navbar-brand",to:"/profil",children:["profil"===n&&Object(a.jsx)("ion-icon",{name:"person-sharp"}),"profil"!==n&&Object(a.jsx)("ion-icon",{name:"person-outline"})]}),(null===localStorage.getItem("email")||""===localStorage.getItem("email"))&&Object(a.jsx)("button",{className:"buttonConnexion navbar-brand text-right",onClick:function(){V.signInWithGoogle()},children:Object(a.jsx)("ion-icon",{name:"log-in-outline"})}),null!==localStorage.getItem("email")&&""!==localStorage.getItem("email")&&Object(a.jsx)("button",{className:"buttonConnexion navbar-brand text-right",onClick:function(){V.Disconnect()},children:Object(a.jsx)("ion-icon",{name:"log-out-outline"})})]})})},De=n(46),Ee=n.n(De),Me=function(e){var t=e.id,n=e.picturesList,i=e.index,r=Object(c.useState)(""),s=Object(o.a)(r,2),l=s[0],d=s[1];return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"modal fade",id:"addComment",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(a.jsx)("div",{className:"modal-dialog",role:"document",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Ajouter un commentaire"}),Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(a.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(a.jsx)("div",{className:"modal-body",children:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Votre commentaire"}),Object(a.jsx)("input",{className:"form-control",placeholder:"Votre commentaire",name:"commentaire",onChange:function(e){if(null!==e){var t=e.target.value;d(t)}},required:!0})]})}),Object(a.jsxs)("div",{className:"modal-footer",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),Object(a.jsx)("button",{type:"button",className:"btn btn-success","data-dismiss":"modal",onClick:function(){n[i].comment=l,v(t,n).then((function(){window.location.reload(!1)}))},children:n[i]&&n[i].comment?"Modifier":"Cr\xe9er"})]})]})})})})},Pe=function(e){var t=e.title,n=e.date,i=e.pictureName,r=e.id,s=e.setLoading,l=Object(c.useState)({titre:t,date:n,pictureName:i}),d=Object(o.a)(l,2),m=d[0],u=d[1],j=Object(c.useState)(!1),b=Object(o.a)(j,2),h=b[0],f=b[1];return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"modal fade",id:"editEvent",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(a.jsx)("div",{className:"modal-dialog",role:"document",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("h5",{className:"modal-title",id:"editEventLabel",children:"Modifier l'\xe9v\xe9nement"}),Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(a.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Changer le titre"}),Object(a.jsx)("input",{className:"form-control",value:m.titre,placeholder:"Titre de l'\xe9v\xe9nement",name:"titre",onChange:function(e){if(null!==e){var t=e.target,n=t.name,a=t.value;u(Object(xe.a)(Object(xe.a)({},m),{},Object(Oe.a)({},n,a)))}},required:!0})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Changer la date"}),Object(a.jsx)("input",{className:"form-control",value:m.date,type:"date",name:"date",onChange:function(e){if(null!==e){var t=e.target,n=t.name,a=t.value;u(Object(xe.a)(Object(xe.a)({},m),{},Object(Oe.a)({},n,a)))}},required:!0})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"mb-2",children:"Changer l'image"}),Object(a.jsx)("input",{className:"form-control",name:"pictureName",type:"file",onChange:function(e){f(!0);var t=e.target.name,n=e.target.files[0];new ve.a(n,{quality:.5,success:function(e){u(Object(xe.a)(Object(xe.a)({},m),{},Object(Oe.a)({},t,e)))}})}})]})]}),Object(a.jsxs)("div",{className:"modal-footer",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),Object(a.jsx)("button",{type:"button",className:"btn btn-success","data-dismiss":"modal",onClick:function(){if(s(!0),h){var e=m.pictureName;P.ref("evenements/".concat(e.name)).put(e).on("state_changed",(function(e){}),(function(e){console.log("Error writing document: "+e)}),(function(){P.ref("evenements").child(e.name).getDownloadURL().then((function(e){E(m,r,e).then((function(){window.location.reload(!1)})).catch((function(e){console.log("Error writing document: "+e)}))}))}))}else E(m,r,m.pictureName).then((function(){window.location.reload(!1)}))},children:"Changer"})]})]})})})})},Ie=function(e){var t=e.id,n=e.userId,i=e.index,r=e.picturesList,s=Object(c.useState)({title:-1!==i?r[i].texte:"",link:-1!==i?r[i].link:""}),l=Object(o.a)(s,2),d=l[0],m=l[1];return Object(c.useEffect)((function(){m({title:-1!==i&&r[i].texte?r[i].texte:"",link:-1!==i&&r[i].link?r[i].link:""})}),[i,r]),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"modal fade",id:"addLink",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(a.jsx)("div",{className:"modal-dialog",role:"document",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Ajouter un lien"}),Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(a.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Texte \xe0 afficher"}),Object(a.jsx)("input",{className:"form-control",value:d.title,placeholder:"texte \xe0 afficher",name:"title",onChange:function(e){if(null!==e){var t=e.target,n=t.name,a=t.value;m(Object(xe.a)(Object(xe.a)({},d),{},Object(Oe.a)({},n,a)))}},required:!0})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Lien web"}),Object(a.jsx)("input",{className:"form-control",value:d.link,placeholder:"lien web",name:"link",onChange:function(e){if(null!==e){var t=e.target,n=t.name,a=t.value;m(Object(xe.a)(Object(xe.a)({},d),{},Object(Oe.a)({},n,a)))}},required:!0})]})]}),Object(a.jsxs)("div",{className:"modal-footer",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),Object(a.jsx)("button",{type:"button",className:"btn btn-success","data-dismiss":"modal",onClick:-1===i?function(){S(t,d,n,"link").then((function(){window.location.reload(!1)}))}:function(){console.log(t),r[i].link=d.link,r[i].texte=d.title,v(t,r).then((function(){window.location.reload(!1)}))},children:-1===i?"Ajouter":"changer"})]})]})})})})},Le=function(e){var t=e.event,n=e.id,i=void 0===n?null:n,r=e.userId,s=void 0===r?null:r,l=Object(c.useState)([]),m=Object(o.a)(l,2),u=m[0],j=m[1],b=Object(d.f)(),h=Object(c.useState)(!1),f=Object(o.a)(h,2),O=f[0],x=f[1],p=Object(c.useState)(!1),g=Object(o.a)(p,2),N=g[0],y=g[1],w=Object(c.useState)(-1),C=Object(o.a)(w,2),F=C[0],k=C[1],D=Object(c.useState)(""),E=Object(o.a)(D,2),M=E[0],I=E[1],L=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=window.confirm("\xcates-vous s\xfbr de vouloir supprimer?");if(c)switch(t){case"event":A(e);break;case"pictureEvent":V(n,a,e);break;default:console.log("Pas encore impl\xe9ment\xe9")}},V=function(e,t,n){t.splice(e,1),v(n,t).then((function(){window.location.reload(!1)}))};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)("h4",{children:t.value.Titre}),Object(a.jsx)("h6",{children:Ee.a.unix(t.value.Date.seconds).format("DD/MM/YYYY")}),i&&Object(a.jsxs)("div",{children:[Object(a.jsx)("img",{src:t.value.PhotoEvent,alt:t.value.Titre}),s&&t.value.Created_By===s&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("ion-icon",{class:"myIcon",name:"create-outline","data-toggle":"modal","data-target":"#editEvent"}),Object(a.jsx)(Pe,{title:t.value.Titre,date:Ee.a.unix(t.value.Date.seconds).format("YYYY-MM-DD"),pictureName:t.value.PhotoEvent,id:i,setLoading:y})]}),Object(a.jsxs)("div",{className:"row align-items-center mb-4",children:[!N&&Object(a.jsxs)("div",{className:"col-sm space-around containerFlexible ",children:[Object(a.jsx)("div",{className:"form-group mt-2",children:Object(a.jsxs)("label",{className:"mb-2 image-upload containerFlexible",children:[Object(a.jsx)("ion-icon",{class:"myIcon",size:"large",name:"images"}),Object(a.jsx)("input",{className:"form-control",name:"pictureName",type:"file",multiple:!0,onChange:function(e){for(var t=e.target.files,n=[],a=0;a<t.length;a++){var c=t[a];new ve.a(c,{quality:.5,success:function(e){n.push(e)}})}I("images"),j(n),x(!0)}}),Object(a.jsx)("p",{className:"d-none d-sm-none d-md-block",children:"Images"})]})}),Object(a.jsx)("div",{className:"form-group mt-2",children:Object(a.jsxs)("label",{className:"mb-2 image-upload containerFlexible",children:[Object(a.jsx)("ion-icon",{class:"myIcon",size:"large",name:"videocam"}),Object(a.jsx)("input",{className:"form-control",name:"pictureName",type:"file",onChange:function(e){var t=[];t.push(e.target.files[0]),j(t),x(!0),I("video")}}),Object(a.jsx)("p",{className:"d-none d-sm-none d-md-block",children:"Vid\xe9o"})]})}),Object(a.jsxs)("div",{className:"form-group mt-2 containerFlexible","data-toggle":"modal","data-target":"#addLink",children:[Object(a.jsx)("ion-icon",{class:"myIcon",size:"large",name:"link",onClick:function(){return k(-1)}}),Object(a.jsx)("p",{className:"d-none d-sm-none d-md-block",children:"lien"})]})]}),O&&Object(a.jsx)("div",{className:"col-sm",children:Object(a.jsxs)("button",{className:"btn btn-primary mt-4 mb-3",onClick:function(){return function(e){var t="";"images"===e?t="evenements":"video"===e&&(t="videos"),x(!1),y(!0);var n=u.length-1;u.forEach((function(a){P.ref("".concat(t,"/").concat(a.name)).put(a).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){P.ref(t).child(a.name).getDownloadURL().then((function(t){S(i,t,s,e).then((function(){--n<=0&&window.location.reload(!1)}))}))}))}))}(M)},children:["Ajouter ","images"===M?"les images":"video"===M?"la vid\xe9o":"zut"]})}),N&&Object(a.jsx)("div",{className:"col-sm mt-4",children:Object(a.jsx)(Ce,{})})]}),Object(a.jsx)("h4",{children:"Les photos de l'event"}),Object(a.jsx)("div",{className:"containerFlexible center",children:t.value.Photos.map((function(e,n){return Object(a.jsxs)("div",{className:"m-1",children:[Object(a.jsxs)("div",{children:[e.image&&Object(a.jsx)("img",{className:"pictureEvent",src:e.image,alt:"li\xe9 \xe0 l'event"}),e.video&&Object(a.jsx)("video",{width:"320",height:"240",controls:!0,children:Object(a.jsx)("source",{src:e.video,type:"video/mp4"})}),e.link&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{className:"mb-2",children:"Lien Web : "}),Object(a.jsx)("a",{className:"linkEvent",rel:"noreferrer",target:"_blank",href:e.link,children:Object(a.jsx)("h3",{children:e.texte})})]}),s&&s===e.Added_by&&Object(a.jsxs)("div",{children:[e.link&&Object(a.jsx)("ion-icon",{class:"myIcon",name:"pencil-outline","data-toggle":"modal","data-target":"#addLink",onClick:function(){return k(n)}}),!e.link&&Object(a.jsx)("ion-icon",{class:"myIcon",name:"pencil-outline","data-toggle":"modal","data-target":"#addComment",onClick:function(){return k(n)}}),Object(a.jsx)("ion-icon",{class:"myIcon",name:"trash-outline",onClick:function(){return L(i,"pictureEvent",n,t.value.Photos)}})]})]}),e.comment&&Object(a.jsx)("p",{className:"mb-1",children:e.comment})]},n)}))}),Object(a.jsx)(Me,{id:i,picturesList:t.value.Photos,index:F}),Object(a.jsx)(Ie,{id:i,userId:s,index:F,picturesList:t.value.Photos})]}),!i&&Object(a.jsxs)("div",{children:[!0===t.value.visible&&Object(a.jsx)("button",{className:"myButton mb-3",onClick:function(){return b.push("/event/"+t.id)},children:Object(a.jsx)("img",{src:t.value.PhotoEvent,alt:t.value.Titre})}),!0!==t.value.visible&&t.value.Created_By===s&&Object(a.jsx)("button",{className:"myButton mb-3",onClick:function(){return b.push("/event/"+t.id)},children:Object(a.jsx)("img",{src:t.value.PhotoEvent,alt:t.value.Titre})}),t.value.Created_By===s&&Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("button",{className:"btn btn-danger",onClick:function(){return L(t.id,"event")},children:"Supprimer"})})]})]})})},Ae=function(e){var t=e.userId,n=Object(c.useState)([]),i=Object(o.a)(n,2),r=i[0],s=i[1],l=Object(c.useState)(!1),d=Object(o.a)(l,2),m=d[0],u=d[1];return Object(a.jsxs)(a.Fragment,{children:[m&&Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)(Ce,{})}),!m&&Object(a.jsx)("button",{type:"button",className:"btn btn-primary mr-3","data-toggle":"modal","data-target":"#exampleModalCreate",children:"Cr\xe9er un \xe9v\xe9nement"}),Object(a.jsx)("div",{className:"modal fade",id:"exampleModalCreate",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(a.jsx)("div",{className:"modal-dialog",role:"document",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Cr\xe9er l'\xe9v\xe9nement"}),Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(a.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Titre de l'\xe9v\xe9nement"}),Object(a.jsx)("input",{className:"form-control",placeholder:"Titre de l'\xe9v\xe9nement",name:"titre",onChange:function(e){if(null!==e){var t=e.target,n=t.name,a=t.value;s(Object(xe.a)(Object(xe.a)({},r),{},Object(Oe.a)({},n,a)))}},required:!0})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Date de l'\xe9v\xe9nement"}),Object(a.jsx)("input",{className:"form-control",type:"date",name:"date",onChange:function(e){if(null!==e){var t=e.target,n=t.name,a=t.value;s(Object(xe.a)(Object(xe.a)({},r),{},Object(Oe.a)({},n,a)))}},required:!0})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"mb-2",children:"Ajouter une image"}),Object(a.jsx)("input",{className:"form-control",name:"pictureName",type:"file",onChange:function(e){var t=e.target.name,n=e.target.files[0];new ve.a(n,{quality:.5,success:function(e){s(Object(xe.a)(Object(xe.a)({},r),{},Object(Oe.a)({},t,e)))}})}})]})]}),Object(a.jsxs)("div",{className:"modal-footer",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"}),Object(a.jsx)("button",{type:"button",className:"btn btn-success","data-dismiss":"modal",onClick:function(){u(!0);var e=r.pictureName;P.ref("evenements/".concat(e.name)).put(e).on("state_changed",(function(e){}),(function(e){console.log("Error writing document: "+e)}),(function(){P.ref("evenements").child(e.name).getDownloadURL().then((function(e){(function(e,t,n){return x.collection("evenement").add({Titre:e.titre,Photos:[],PhotoEvent:t,Date:b.a.firestore.Timestamp.fromDate(new Date(e.date)),Created_By:n,visible:!0})})(r,e,t).then((function(){window.location.reload(!1)})).catch((function(e){console.log("Error writing document: "+e)}))}))}))},children:"Cr\xe9er"})]})]})})})]})},Ve=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(d.h)().id,s=Object(c.useState)("d-none"),l=Object(o.a)(s,2),m=l[0],u=l[1],j=Object(c.useState)(),b=Object(o.a)(j,2),h=b[0],O=b[1];return Object(c.useEffect)((function(){window.scroll(0,0);var e=f().id;void 0===e?L(localStorage.getItem("email")).then((function(e){void 0===e||void 0===e.id?u("d-none"):(u("d-block"),O(e.id))})):(u("d-block"),O(e)),D().then((function(e){var t=[];e.forEach((function(e){t.push({id:e.id,value:e.data()})})),i(t)})).catch((function(e){console.log("Error getting documents: ",e)}))}),[r]),Object(a.jsxs)(a.Fragment,{children:[!r&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{className:"text-center mb-3 moreSize",children:"Fil d'actualit\xe9"}),Object(a.jsx)("div",{className:"text-center mb-3 "+m,children:Object(a.jsx)(Ae,{userId:h})}),n.map((function(e){return Object(a.jsx)(Le,{event:e,userId:h},e.id)}))]}),r&&n.filter((function(e){return e.id===r})).map((function(e){return Object(a.jsx)(Le,{event:e,id:r,userId:h},e.id)}))]})},Be=function(){var e=Object(c.useState)("admin/users"),t=Object(o.a)(e,2),n=t[0],i=t[1],r=function(e){i(e)},s=Object(d.g)();return Object(c.useEffect)((function(){i(s.pathname.substring(1))}),[s]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark space-around",children:[Object(a.jsxs)(l.b,{onClick:function(){return r("admin/users")},className:"navbar-brand",to:"/admin/users",children:["admin/users"===n&&Object(a.jsx)("ion-icon",{name:"person-add"}),"admin/users"!==n&&Object(a.jsx)("ion-icon",{name:"person-add-outline"})]}),Object(a.jsxs)(l.b,{onClick:function(){return r("admin/pictures")},className:"navbar-brand",to:"/admin/pictures",children:["admin/pictures"===n&&Object(a.jsx)("ion-icon",{name:"images"}),"admin/pictures"!==n&&Object(a.jsx)("ion-icon",{name:"images-outline"})]}),Object(a.jsxs)(l.b,{onClick:function(){return r("admin/emails")},className:"navbar-brand",to:"/admin/emails",children:["admin/emails"===n&&Object(a.jsx)("ion-icon",{name:"mail"}),"admin/emails"!==n&&Object(a.jsx)("ion-icon",{name:"mail-outline"})]}),Object(a.jsxs)(l.b,{onClick:function(){return r("admin/export")},className:"navbar-brand",to:"/admin/export",children:["admin/export"===n&&Object(a.jsx)("ion-icon",{name:"settings"}),"admin/export"!==n&&Object(a.jsx)("ion-icon",{name:"settings-outline"})]})]})})},Ue=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),l=s[0],d=s[1],m=Object(c.useState)([]),u=Object(o.a)(m,2),j=u[0],b=u[1],h=Object(c.useState)(""),O=Object(o.a)(h,2),x=O[0],p=O[1],g=Object(c.useState)(!0),v=Object(o.a)(g,2),N=v[0],y=v[1],w=Object(c.useState)(!1),C=Object(o.a)(w,2),F=C[0],k=C[1],S=Object(c.useState)(""),D=Object(o.a)(S,2),E=D[0],I=D[1],L=Object(c.useState)([]),A=Object(o.a)(L,2),B=A[0],U=A[1],R=Object(c.useState)(!1),T=Object(o.a)(R,2),_=T[0],z=T[1],G=Object(c.useState)("backCard"),q=Object(o.a)(G,2),H=q[0],J=q[1];function W(){U([]),y(!0)}var K=function(e){var t=e.target,n=t.name,a=t.value;U(Object(xe.a)(Object(xe.a)({},B),{},Object(Oe.a)({},n,a)))};return Object(c.useEffect)((function(){var e=f();void 0!==e.data&&i(e.data.status),b(function(){var e=[];return Y.map((function(t){return e.push({value:t.generation+"/"+t.numberFamilly,label:t.firstName+" "+t.lastName})})),e}())}),[]),Object(a.jsxs)(a.Fragment,{children:[(!n||"admin"!==n)&&Object(a.jsx)("div",{children:"Bien essay\xe9 mais tu n'as pas le droit de venir ici"}),n&&"admin"===n&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Be,{}),Object(a.jsx)("h1",{children:"Gestion des utilisateurs"}),Object(a.jsx)("h6",{children:"Pour modifier une personne, s\xe9lectionne la dans la liste ci-dessous"}),Object(a.jsx)(pe,{data:j,modifyPerson:function(e){if(z(!1),p("vide"),window.scroll(0,0),y(!1),null!==e){var t=e.split("/")[1],n=X(t);void 0===n.email&&(n.email=""),U(n),V.FindIdPerson(t).then((function(e){var t=e.docs.map((function(e){return e.id}));I(t[0])}))}else W();J("backCard")}}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Nom de famille (souvent nom mari - \xe9pouse)"}),Object(a.jsx)("input",{className:"form-control",name:"famillyName",value:B.famillyName||"",placeholder:"Nom de famille...",onChange:K})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Date de mariage"}),Object(a.jsx)("input",{className:"form-control",name:"dateMariage",value:B.dateMariage||"",placeholder:"Date de mariage",onChange:K})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Nom"}),Object(a.jsx)("input",{className:"form-control",name:"lastName",value:B.lastName||"",placeholder:"Nom...",onChange:K})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Pr\xe9nom"}),Object(a.jsx)("input",{className:"form-control",name:"firstName",value:B.firstName||"",placeholder:"Pr\xe9nom...",onChange:K})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Date de naissance"}),Object(a.jsx)("input",{className:"form-control",name:"birthDate",value:B.birthDate||"",placeholder:"Date de naissance...",onChange:K})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{className:"form-control",name:"email",value:void 0===B.email?"":B.email,placeholder:"Email...",onChange:K})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Num\xe9ro de famille (important)"}),Object(a.jsx)("input",{className:"form-control",name:"numberFamilly",value:B.numberFamilly||"",type:"number",placeholder:"num\xe9ro de famille...",onChange:K})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"G\xe9n\xe9ration (important)"}),Object(a.jsx)("input",{className:"form-control",name:"generation",value:B.generation||"",placeholder:"g\xe9n\xe9ration...",onChange:K})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Image profil"}),Object(a.jsx)("input",{className:"form-control",name:"pictureName",type:"file",onChange:function(e){var t=e.target.name,n=e.target.files[0];U(Object(xe.a)(Object(xe.a)({},B),{},Object(Oe.a)({},t,n))),new ve.a(n,{quality:.5,success:function(e){d(e),k(!0)}})}})]}),Object(a.jsxs)("div",{className:"row align-items-center mb-4",children:[N&&!_&&Object(a.jsx)("div",{className:"col-sm mt-4",children:Object(a.jsx)("button",{className:"btn btn-primary m-4",onClick:function(){""===l?M(B).then((function(){p(B.firstName+" "+B.lastName+" a bien \xe9t\xe9 enregistr\xe9"),W()})).catch((function(e){p("Error writing document: "+e)})):P.ref("images/".concat(l.name)).put(l).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){P.ref("images").child(l.name).getDownloadURL().then((function(e){M(B,e).then((function(){p(B.firstName+" "+B.lastName+" a bien \xe9t\xe9 enregistr\xe9"),W()})).catch((function(e){p("Error writing document: "+e)}))}))}))},children:"cr\xe9er"})}),!N&&!_&&Object(a.jsx)("div",{className:"col-sm mt-4",children:Object(a.jsx)("button",{className:"btn btn-secondary m-4",onClick:function(){(z(!0),F)?P.ref("images/".concat(l.name)).put(l).on("state_changed",(function(e){}),(function(e){p("Error writing document: "+e)}),(function(){P.ref("images").child(l.name).getDownloadURL().then((function(e){V.ModifyUserFireBase(E,B,e).then((function(){p("Vos donn\xe9es ont bien \xe9t\xe9 modifi\xe9es")})).catch((function(e){p("Error writing document: "+e)}))}))})):V.ModifyUserFireBase(E,B).then((function(){p("Vos donn\xe9es ont bien \xe9t\xe9 modifi\xe9es")})).catch((function(e){p("Error writing document: "+e)}));J("frontCard")},children:"Modifier"})}),_&&Object(a.jsx)("div",{className:"col-sm mt-4",children:Object(a.jsx)(Ce,{})}),Object(a.jsx)("div",{className:"alert alert-success "+H,role:"alert",children:Object(a.jsx)("p",{children:x})})]}),B.PhotosHistory&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{className:"mt-4 mb-0",children:"Votre historique photo"}),Object(a.jsx)(ye,{person:B,id:E})]})]})]})},Re=n(32),Te=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)([]),s=Object(o.a)(r,2),l=s[0],d=s[1],m=Object(c.useState)(!1),u=Object(o.a)(m,2),j=u[0],b=u[1];Object(c.useEffect)((function(){d([]);var e=P.ref().child("images/");e.listAll().then((function(e){e.items.forEach((function(e){e.getDownloadURL().then((function(e){d((function(t){return[].concat(Object(Re.a)(t),[e])}))}))}))})).catch((function(e){console.log(e)})),(e=P.ref().child("evenements/")).listAll().then((function(e){e.items.forEach((function(e){e.getDownloadURL().then((function(e){d((function(t){return[].concat(Object(Re.a)(t),[e])}))}))}))})).catch((function(e){console.log(e)}));var t=f();void 0!==t.data&&i(t.data.status)}),[j]);var h=function(e){(function(e){return g.apply(this,arguments)})(e).then((function(){b(!j)})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(a.Fragment,{children:[(!n||"admin"!==n)&&Object(a.jsx)("div",{children:"Bien essay\xe9 mais tu n'as pas le droit de venir ici"}),n&&"admin"===n&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Be,{}),Object(a.jsx)("h1",{children:"Gestion des images"}),Object(a.jsxs)("p",{children:["Nombre d'images : ",l.length]}),Object(a.jsx)("div",{className:"containerFlexible",children:l.map((function(e,t){return Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)("img",{className:"pictureAdmin",src:e,alt:e}),Object(a.jsx)("ion-icon",{class:"myIcon",name:"trash-outline",onClick:function(){return h(e)}})]},t)}))})]})]})},_e=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)([]),s=Object(o.a)(r,2),l=s[0],d=s[1],m=Object(c.useState)(0),u=Object(o.a)(m,2),j=u[0],b=u[1],h=Object(c.useState)([]),f=Object(o.a)(h,2),O=f[0],x=f[1],p=Object(c.useState)(0),g=Object(o.a)(p,2),v=g[0],N=g[1],y=Object(c.useState)(0),w=Object(o.a)(y,2),C=w[0],F=w[1],k=Object(c.useState)(""),S=Object(o.a)(k,2),D=S[0],E=S[1],M=Object(c.useState)(""),P=Object(o.a)(M,2),I=P[0],L=P[1],A=Object(c.useState)("dark"),B=Object(o.a)(A,2),U=B[0],R=B[1];function T(){var e=v;N(v+1),x(n[e+=1]);var t=re(n[e].numberFamilly);L(t.goodAnswer),d(t.tabParentsRandom)}return Object(c.useEffect)((function(){if(0===J().length)V.findAll().then((function(e){var t=e.docs.map((function(e){return e.data()}));W(t);var n=ie(ne("4",!0));i(n),x(n[0]);var a=re(n[0].numberFamilly);L(a.goodAnswer),d(a.tabParentsRandom)}));else{var e=ie(ne("4",!0));i(e),x(e[0]),x(e[0]);var t=re(e[0].numberFamilly);L(t.goodAnswer),d(t.tabParentsRandom)}}),[]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"d-block d-sm-block d-md-block d-lg-none",children:Object(a.jsx)(he,{})}),20===C&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h1",{children:["Bravo tu as obtenu ",j," sur ",20]}),Object(a.jsx)("button",{onClick:function(){window.location.reload(!1)},className:"btn btn-primary mt-3",children:"Recommencer"})]}),C<20&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{className:"text-center mt-3",children:"Qui est mon papa ou ma maman ?"}),Object(a.jsxs)("p",{className:"text-center",children:["Score : ",j," / ",20]}),Object(a.jsxs)("p",{className:"text-center text-"+U,children:[D," "]}),O.pictureName&&Object(a.jsx)("div",{className:"text-center mb-3",children:Object(a.jsx)("img",{src:O.pictureName,alt:"Personne selectionn\xe9e"})}),Object(a.jsx)("h4",{className:"text-center",children:"Les choix possibles"}),Object(a.jsx)("div",{className:"containerFlexible space-around",children:0!==l.length&&l.map((function(e,t){return Object(a.jsx)("div",{children:Object(a.jsx)("img",{className:"imageJeu2",src:e.pictureName,alt:"Parents selectionn\xe9s",onClick:function(){return function(e){e.numberFamilly===O.numberFamilly.slice(0,2)||e.numberFamilly===O.numberFamilly.slice(0,2)+"0"?(b(j+1),F(C+1),T(),E("Bravo ! "+O.firstName+" est bien le fils ou la fille de "+e.firstName),R("success"),window.scroll(0,0)):(T(),F(C+1),E("Rat\xe9 ! Le papa ou la maman de "+O.firstName+" est "+I.firstName),R("danger"),window.scroll(0,0))}(e)}})},t)}))})]})]})})},ze=n(38),Ge=n.n(ze),qe=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)({email:"",id:""}),s=Object(o.a)(r,2),l=s[0],d=s[1],m=Object(c.useState)(""),u=Object(o.a)(m,2),j=u[0],b=u[1],h=Object(c.useState)([]),O=Object(o.a)(h,2),p=O[0],g=O[1],v=Object(c.useState)([]),N=Object(o.a)(v,2),y=N[0],k=N[1],S=Object(c.useState)(""),D=Object(o.a)(S,2),E=D[0],M=D[1];return Object(c.useEffect)((function(){var e=f();void 0!==e.data&&i(e.data.status),function(){return w.apply(this,arguments)}().then((function(e){g(e)})),k(Z())}),[E]),Object(a.jsxs)(a.Fragment,{children:[(!n||"admin"!==n)&&Object(a.jsx)("div",{children:"Bien essay\xe9 mais tu n'as pas le droit de venir ici"}),n&&"admin"===n&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Be,{}),Object(a.jsx)("h1",{children:"Gestion des emails"}),Object(a.jsx)("h3",{children:"Liste des adresses mails non valid\xe9es"}),Object(a.jsx)(pe,{data:p,modifyPerson:function(e){if(null!==e){var t=e.split("email:")[0],n=e.split("email:")[1];d(Object(xe.a)(Object(xe.a)({},l),{},{email:t})),b(n)}}}),Object(a.jsx)("div",{className:"text-center",children:Object(a.jsx)("button",{className:"btn btn-danger mt-4",onClick:function(){(function(e){return C.apply(this,arguments)})(j).then((function(){M("L'email a \xe9t\xe9 supprim\xe9")})).catch((function(e){M("Error writing document: "+e)}))},children:"Supprimer email"})}),Object(a.jsx)("h3",{className:"mt-4",children:"Liste des personnes sans email"}),Object(a.jsx)(pe,{data:y,modifyPerson:function(e){null!==e&&d(Object(xe.a)(Object(xe.a)({},l),{},{id:e}))}}),Object(a.jsx)("div",{className:"text-center",children:Object(a.jsx)("button",{className:"btn btn-primary mt-4",onClick:function(){(function(e,t){return x.collection("emails").doc(e).update({status:t})})(j,"v\xe9rifi\xe9").then((function(){(function(e,t){return F.apply(this,arguments)})(l.id,l.email).then((function(){M("Vos donn\xe9es ont bien \xe9t\xe9 modifi\xe9es")})).catch((function(e){M("Error writing document: "+e)}))}))},children:"Attribuer"})}),Object(a.jsx)("div",{className:"alert alert-success mt-3",role:"alert",children:Object(a.jsx)("p",{children:E})}),Object(a.jsx)("h4",{children:"Ajouter des adresses mails"}),Object(a.jsx)("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:function(e){var t=e.target.files;t&&(console.log(t[0]),Ge.a.parse(t[0],{complete:function(e){for(var t=1;t<e.data.length;t++)n=e.data[t],x.collection("emails").add({adresseMail:n[0],status:"\xe0 v\xe9rifi\xe9"});var n}}))}})]})]})},He=n(56),Ye=(n(94),function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),l=s[0],d=s[1];return Object(c.useEffect)((function(){var e=f();void 0!==e.data&&d(e.data.status),D().then((function(e){var t=e.docs.map((function(e){return e.data()}));i(t)}))}),[]),Object(a.jsxs)(a.Fragment,{children:[(!l||"admin"!==l)&&Object(a.jsx)("div",{children:"Bien essay\xe9 mais tu n'as pas le droit de venir ici"}),l&&"admin"===l&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Be,{}),Object(a.jsx)("h1",{children:"test"}),Object(a.jsx)(He.CSVLink,{data:n,children:"Download me"}),";",Object(a.jsx)("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:function(e){var t=e.target.files;t&&Ge.a.parse(t[0],{complete:function(e){for(var t=1;t<e.data.length;t++)y(e.data[t])}})}})]})]})});var Je=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(c.useEffect)((function(){(function(e){return k.apply(this,arguments)})(localStorage.getItem("email")).then((function(e){i(void 0!==e?e[0]:"not connected")}))}),[]),Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(G,{children:Object(a.jsxs)(l.a,{children:[Object(a.jsx)("div",{className:"d-none d-sm-none d-md-block",children:Object(a.jsx)(B,{})}),Object(a.jsx)("div",{className:"d-block d-sm-block d-md-block d-lg-none",children:Object(a.jsx)(Se,{})}),Object(a.jsxs)("main",{children:[n&&"v\xe9rifi\xe9"===n.status&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"container mt-3",children:Object(a.jsxs)(d.c,{children:[Object(a.jsx)(d.a,{path:"/admin/export",component:Ye}),Object(a.jsx)(d.a,{path:"/admin/emails",component:qe}),Object(a.jsx)(d.a,{path:"/admin/users",component:Ue}),Object(a.jsx)(d.a,{path:"/admin/pictures",component:Te}),Object(a.jsx)(d.a,{path:"/arbre/:generation/:numberFamilly",component:le}),Object(a.jsx)(d.a,{path:"/generation4",component:be}),Object(a.jsx)(d.a,{path:"/generation3",component:je}),Object(a.jsx)(d.a,{path:"/generation2",component:ue}),Object(a.jsx)(d.a,{path:"/anniversaire",component:de}),Object(a.jsx)(d.a,{path:"/jeu2",component:_e}),Object(a.jsx)(d.a,{path:"/jeu",component:fe}),Object(a.jsx)(d.a,{path:"/profil",component:ke}),Object(a.jsx)(d.a,{path:"/arbre",component:le}),Object(a.jsx)(d.a,{path:"/event/:id",component:Ve}),Object(a.jsx)(d.a,{path:"/",component:Ve})]})})}),n&&"not connected"===n&&Object(a.jsx)("h4",{children:"Vous n'\xeates pas connect\xe9. C'est un site familial, inutile de vous connecter pour rien."}),n&&"not connected"!==n&&"v\xe9rifi\xe9"!==n.status&&Object(a.jsx)("h4",{children:"Votre adresse mail est en cours de v\xe9rification. Pr\xe9venez votre administrateur"})]})]})})})},We=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,101)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(Je,{})}),document.getElementById("root")),We()}},[[95,1,2]]]);
//# sourceMappingURL=main.c16ce06a.chunk.js.map