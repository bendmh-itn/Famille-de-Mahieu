[{"D:\\Documents\\famille\\src\\index.js":"1","D:\\Documents\\famille\\src\\App.js":"2","D:\\Documents\\famille\\src\\reportWebVitals.js":"3","D:\\Documents\\famille\\src\\Components\\navBar.jsx":"4","D:\\Documents\\famille\\src\\Functions\\FilterData.js":"5","D:\\Documents\\famille\\src\\Pages\\deMahieu-dessain.jsx":"6","D:\\Documents\\famille\\src\\firebase.js":"7","D:\\Documents\\famille\\src\\Components\\Providers\\UserProvider.jsx":"8","D:\\Documents\\famille\\src\\Components\\SignIn.jsx":"9","D:\\Documents\\famille\\src\\Components\\trombinoscopeFlex.jsx":"10","D:\\Documents\\famille\\src\\Functions\\cache.js":"11","D:\\Documents\\famille\\src\\Components\\selectPerson.jsx":"12","D:\\Documents\\famille\\src\\Pages\\anniversaire.jsx":"13","D:\\Documents\\famille\\src\\constant.js":"14","D:\\Documents\\famille\\src\\Pages\\generation3.jsx":"15","D:\\Documents\\famille\\src\\Pages\\generation4.jsx":"16","D:\\Documents\\famille\\src\\Pages\\jeu.jsx":"17","D:\\Documents\\famille\\src\\Pages\\profilUser.jsx":"18","D:\\Documents\\famille\\src\\Components\\selectModifyPerson.jsx":"19"},{"size":500,"mtime":499162500000,"results":"20","hashOfConfig":"21"},{"size":1189,"mtime":1642951026401,"results":"22","hashOfConfig":"21"},{"size":362,"mtime":499162500000,"results":"23","hashOfConfig":"21"},{"size":2082,"mtime":1643215715873,"results":"24","hashOfConfig":"21"},{"size":4680,"mtime":1643383292731,"results":"25","hashOfConfig":"21"},{"size":3457,"mtime":1643383847575,"results":"26","hashOfConfig":"21"},{"size":1890,"mtime":1643213718902,"results":"27","hashOfConfig":"21"},{"size":556,"mtime":1642950224065,"results":"28","hashOfConfig":"21"},{"size":2777,"mtime":1613334489282,"results":"29","hashOfConfig":"21"},{"size":2567,"mtime":1643214417672,"results":"30","hashOfConfig":"21"},{"size":296,"mtime":1613866893596,"results":"31","hashOfConfig":"21"},{"size":527,"mtime":1636735069401,"results":"32","hashOfConfig":"21"},{"size":1870,"mtime":1642950757492,"results":"33","hashOfConfig":"21"},{"size":39,"mtime":1636734011425,"results":"34","hashOfConfig":"21"},{"size":1373,"mtime":1638222394514,"results":"35","hashOfConfig":"21"},{"size":1239,"mtime":1639676354771,"results":"36","hashOfConfig":"21"},{"size":5081,"mtime":1643218383032,"results":"37","hashOfConfig":"21"},{"size":9663,"mtime":1643384348232,"results":"38","hashOfConfig":"21"},{"size":511,"mtime":1642953530070,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"3wxqzf",{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"77"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"D:\\Documents\\famille\\src\\index.js",[],["80","81"],"D:\\Documents\\famille\\src\\App.js",[],"D:\\Documents\\famille\\src\\reportWebVitals.js",[],"D:\\Documents\\famille\\src\\Components\\navBar.jsx",[],"D:\\Documents\\famille\\src\\Functions\\FilterData.js",[],"D:\\Documents\\famille\\src\\Pages\\deMahieu-dessain.jsx",["82","83"],"D:\\Documents\\famille\\src\\firebase.js",[],"D:\\Documents\\famille\\src\\Components\\Providers\\UserProvider.jsx",[],"D:\\Documents\\famille\\src\\Components\\SignIn.jsx",["84"],"D:\\Documents\\famille\\src\\Components\\trombinoscopeFlex.jsx",[],"D:\\Documents\\famille\\src\\Functions\\cache.js",["85"],"D:\\Documents\\famille\\src\\Components\\selectPerson.jsx",[],"D:\\Documents\\famille\\src\\Pages\\anniversaire.jsx",[],"D:\\Documents\\famille\\src\\constant.js",[],"D:\\Documents\\famille\\src\\Pages\\generation3.jsx",[],"D:\\Documents\\famille\\src\\Pages\\generation4.jsx",[],"D:\\Documents\\famille\\src\\Pages\\jeu.jsx",[],"D:\\Documents\\famille\\src\\Pages\\profilUser.jsx",["86"],"import React, {useContext, useState, useEffect} from 'react';\r\nimport '../App.css';\r\nimport fireBase from '../firebase';\r\nimport { storage } from '../firebase';\r\nimport {UserContext} from '../Components/Providers/UserProvider';\r\nimport { AllDataInOptions, FindOnePersonByNumberFamilly, FindOnePersonByEmail, ChildrenInOptions } from '../Functions/FilterData';\r\nimport SelectPerson from '../Components/selectModifyPerson';\r\n\r\nconst ConfirmEmail = () => {\r\n\r\n    const [emailUser, setEmailUser] = useState(\"\");\r\n    const [options, setOptions] = useState([]);\r\n    const [message, setMessage] = useState(\"\");\r\n    const [id, setId] = useState(\"\");\r\n    const [lastName, setLastName] = useState(\"\");\r\n    const [firstName, setFirstName] = useState(\"\");\r\n    const [birthDate, setBirthDate] = useState(\"\");\r\n    const [numberFamilly, setNumberFamilly] = useState(0);\r\n    const [generation, setGeneration] = useState(\"\");\r\n    const [famillyName, setFamillyName] = useState(\"\");\r\n    const [picture, setPicture] = useState(\"\");\r\n    const [dateMariage, setDateMariage] = useState(\"\");\r\n    //const [description, setDescription] = useState(\"\");\r\n    const [confirmedAccount, setConfirmedAccount] = useState(false);\r\n    const [pictureChanged, setPictureChanged] = useState(false);\r\n    const [myClass, setMyClass] = useState(\"backCard\");\r\n\r\n    \r\n    const value = useContext(UserContext);\r\n\r\n    const addEmailUser = () => {\r\n        fireBase.ModifyUserFireBase(id,lastName, firstName, birthDate, numberFamilly, generation, picture, famillyName, dateMariage, emailUser).then(() => {\r\n            setMessage(\"Votre adresse a bien été ajouté.\");\r\n            setMyClass(\"frontCard\");\r\n          })\r\n          .catch((error) => {\r\n            setMessage(\"Error writing document: \" + error);\r\n          });\r\n    }\r\n\r\n    const modifyPersonSelect = (e) => {\r\n        if(e !== null){\r\n            let numberFamilly = e.split('/')[1];\r\n            const person = FindOnePersonByNumberFamilly(numberFamilly);\r\n            person.dateMariage = person.dateMariage === undefined ? \"\" : person.dateMariage;\r\n            person.description = person.description === undefined? \"\" : person.description;\r\n            setLastName(person.lastName);\r\n            setFirstName(person.firstName);\r\n            setGeneration(person.generation);\r\n            setNumberFamilly(person.numberFamilly);\r\n            setBirthDate(person.birthDate);\r\n            setFamillyName(person.famillyName);\r\n            setPicture(person.pictureName);\r\n            setDateMariage(person.dateMariage);\r\n            fireBase.FindIdPerson(numberFamilly)\r\n            .then(querySnapshot => {\r\n\t\t\t\tconst data = querySnapshot.docs.map(doc => doc.id);\r\n\t\t\t\tsetId(data[0]);\r\n\t\t\t});\r\n        }else{\r\n            RefreshField();\r\n        }\r\n    }\r\n\r\n\r\n\r\n    const onChangePicture = e => {\r\n        setPicture(e.target.files[0]);\r\n        setPictureChanged(true);\r\n    };\r\n\r\n    const modifyPerson = () => {\r\n        if(!pictureChanged){\r\n            fireBase.ModifyUserFireBase(id, lastName, firstName, birthDate, numberFamilly, generation, picture, famillyName, dateMariage, emailUser).then(() => {\r\n                setMessage(\"Vos données ont bien été modifié\");\r\n              })\r\n              .catch((error) => {\r\n                setMessage(\"Error writing document: \" + error);\r\n              });\r\n        }else{\r\n            const uploadTask = storage.ref(`images/${picture.name}`).put(picture);\r\n            uploadTask.on(\r\n                \"state_changed\",\r\n                snapshot => {},\r\n                error => {\r\n                    setMessage(\"Error writing document: \" + error);\r\n                },\r\n                () => {\r\n                    storage\r\n                        .ref(\"images\")\r\n                        .child(picture.name)\r\n                        .getDownloadURL()\r\n                        .then(pictureName => {\r\n                            fireBase.ModifyUserFireBase(id, lastName, firstName, birthDate, numberFamilly, generation, pictureName, famillyName, dateMariage, emailUser).then(() => {\r\n                                setMessage(\"Vos données ont bien été modifié\");\r\n                                })\r\n                                .catch((error) => {\r\n                                setMessage(\"Error writing document: \" + error);\r\n                                });\r\n                        });\r\n                }\r\n            )\r\n        }\r\n    }\r\n\r\n    function RefreshField (){\r\n        setId(\"\");\r\n        setLastName(\"\");\r\n        setFirstName(\"\");\r\n        setGeneration(\"\");\r\n        setNumberFamilly(\"\");\r\n        setBirthDate(\"\");\r\n        setFamillyName(\"\");\r\n        setDateMariage(\"\");\r\n    }\r\n    \r\n    useEffect(() => {\r\n        if(value !== null){\r\n            setEmailUser(value.email);\r\n            setOptions(AllDataInOptions());\r\n        }\r\n        fireBase.FindEmailPerson(emailUser)\r\n        .then(querySnapshot => {\r\n            const data = querySnapshot.docs.map(doc => doc.id);\r\n            console.log(data);\r\n            if(data[0] !== undefined){\r\n                setId(data[0]);\r\n                setConfirmedAccount(true);\r\n                const person = FindOnePersonByEmail(emailUser);\r\n                console.log(person);\r\n                person.dateMariage = person.dateMariage === undefined ? \"\" : person.dateMariage;\r\n                setLastName(person.lastName);\r\n                setFirstName(person.firstName);\r\n                setGeneration(person.generation);\r\n                setNumberFamilly(person.numberFamilly);\r\n                setBirthDate(person.birthDate);\r\n                setFamillyName(person.famillyName);\r\n                setPicture(person.pictureName);\r\n                setDateMariage(person.dateMariage);\r\n                setOptions(ChildrenInOptions(person.numberFamilly, person.generation))\r\n            }\r\n        });\r\n    },[emailUser]);\r\n\r\n    return ( \r\n        <>\r\n            <div className='container'>\r\n            {\r\n                emailUser === \"\" &&\r\n                <h3>Reviens à la page d'accueil : Famille de Mahieu</h3>\r\n            }\r\n            {\r\n                emailUser !== \"\" && !confirmedAccount &&\r\n                <div>\r\n                    <p>Votre adresse mail : <span className='email'>{emailUser}</span></p>\r\n                    <p>Ce sera votre adresse pour modifier vos données</p>\r\n                    <p>Trouve ton nom dans la liste pour ajouter ton adresse mail à ton compte</p>\r\n                    <div className=\"alert alert-danger\" role=\"alert\">\r\n                        Ne te trompe surtout pas\r\n                    </div>\r\n                    <SelectPerson\r\n                        data={options}\r\n                        modifyPerson={modifyPersonSelect}\r\n                    />\r\n                    \r\n                    <button className='btn btn-success mt-4 mb-4' onClick={addEmailUser}>Valider</button>\r\n                    <div className={'alert alert-success ' + myClass} role=\"alert\">\r\n                        <p>{message}</p>\r\n                    </div>\r\n                </div>\r\n            }\r\n            {\r\n                confirmedAccount &&\r\n                <div>\r\n                    <h2>Votre profil</h2>\r\n                    <div className=\"form-group\">\r\n                        <label>Date de mariage</label>\r\n                        <input className=\"form-control\" value={dateMariage} placeholder=\"Date de mariage\" onChange={e => setDateMariage(e.target.value)}/>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Nom</label>\r\n                        <input className=\"form-control\" value={lastName} placeholder=\"Nom...\" onChange={e => setLastName(e.target.value)}/>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Prénom</label>\r\n                        <input className=\"form-control\" value={firstName} placeholder=\"Prénom...\" onChange={e => setFirstName(e.target.value)}/>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Date de naissance</label>\r\n                        <input className=\"form-control\" value={birthDate} placeholder=\"Date de naissance...\" onChange={e => setBirthDate(e.target.value)}/>\r\n                    </div>\r\n                    {/*<div className=\"form-group\">\r\n                        <label>Description</label>\r\n                        <textarea className=\"form-control\" value={description} placeholder=\"Votre description...\" onChange={e => setDescription(e.target.value)}/>\r\n                    </div>*/}\r\n                    <div className=\"form-group\">\r\n                        <label>Image profil</label>\r\n                        <input className=\"form-control\" type=\"file\" onChange={onChangePicture} />\r\n                    </div>\r\n                    <button className=\"btn btn-secondary m-4\" onClick={modifyPerson} >\r\n                        Modifier\r\n                    </button>\r\n                    <p>{message}</p>\r\n                    {\r\n                        options.length !== 1 && \r\n                        <div>\r\n                            <h4>Pour modifier une personne de votre famille, sélectionne-le dans la liste ci-dessous</h4>\r\n                            <SelectPerson\r\n                                data={options}\r\n                                modifyPerson={modifyPersonSelect}\r\n                            />\r\n                        </div>\r\n                    }\r\n                </div>\r\n            }\r\n            </div>\r\n        </>\r\n     );\r\n}\r\n \r\nexport default ConfirmEmail;","D:\\Documents\\famille\\src\\Components\\selectModifyPerson.jsx",[],{"ruleId":"87","replacedBy":"88"},{"ruleId":"89","replacedBy":"90"},{"ruleId":"91","severity":1,"message":"92","line":48,"column":8,"nodeType":"93","endLine":48,"endColumn":61,"suggestions":"94"},{"ruleId":"95","severity":1,"message":"96","line":63,"column":6,"nodeType":"97","endLine":63,"endColumn":39},{"ruleId":"98","severity":1,"message":"99","line":8,"column":19,"nodeType":"100","messageId":"101","endLine":8,"endColumn":27},{"ruleId":"102","severity":1,"message":"103","line":17,"column":1,"nodeType":"104","endLine":20,"endColumn":2},{"ruleId":"91","severity":1,"message":"105","line":143,"column":7,"nodeType":"93","endLine":143,"endColumn":18,"suggestions":"106"},"no-native-reassign",["107"],"no-negated-in-lhs",["108"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'options.length'. Either include it or remove the dependency array.","ArrayExpression",["109"],"jsx-a11y/heading-has-content","Headings must have content and the content must be accessible by a screen reader.","JSXOpeningElement","no-unused-vars","'setError' is assigned a value but never used.","Identifier","unusedVar","import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration","React Hook useEffect has a missing dependency: 'value'. Either include it or remove the dependency array.",["110"],"no-global-assign","no-unsafe-negation",{"desc":"111","fix":"112"},{"desc":"113","fix":"114"},"Update the dependencies array to be: [match.params.generation, match.params.numberFamilly, options.length]",{"range":"115","text":"116"},"Update the dependencies array to be: [emailUser, value]",{"range":"117","text":"118"},[1664,1717],"[match.params.generation, match.params.numberFamilly, options.length]",[5883,5894],"[emailUser, value]"]